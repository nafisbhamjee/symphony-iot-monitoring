# Alert Engine Configuration
# Edit this file to configure email settings and alert rules

prometheus:
  url: "http://sample-prometheus:9090"
  scrape_interval: 30  # Check metrics every 30 seconds

email:
  enabled: true  # Enabled for real Gmail testing
  smtp_server: "smtp.gmail.com"
  smtp_port: 587
  from_email: "sathyacanchi@gmail.com"
  to_emails:
    - "sathyacanchi@gmail.com"  # You'll receive the alerts
  username: "sathyacanchi@gmail.com"
  password: "wgen oolv lgzb skur"  # Gmail app password

alert_settings:
  cooldown_minutes: 15  # Wait 15 minutes before re-sending same alert
  resolution_notification: true  # Send "all clear" email when alert resolves

alert_rules:
  - name: "critical_temperature"
    description: "Temperature exceeded safe threshold"
    metric: "iot_temperature_celsius"
    condition: ">"
    threshold: 35
    duration: 120  # Must be true for 2 minutes (avoid flapping)
    severity: "critical"
    email_subject: "ðŸ”¥ CRITICAL: High Temperature Alert"
    email_body: |
      Temperature has exceeded 35Â°C for 2 minutes!
      
      This requires immediate attention.
    
  - name: "low_battery"
    description: "Device battery running low"
    metric: "iot_battery_percent"
    condition: "<"
    threshold: 20
    duration: 300  # 5 minutes
    severity: "warning"
    email_subject: "ðŸ”‹ WARNING: Low Battery Alert"
    email_body: |
      Battery level has dropped below 20% for 5 minutes.
      
      Please check device power supply.
    
  - name: "high_humidity"
    description: "Humidity too high"
    metric: "iot_humidity_percent"
    condition: ">"
    threshold: 80
    duration: 180  # 3 minutes
    severity: "warning"
    email_subject: "ðŸ’§ WARNING: High Humidity Alert"
    email_body: |
      Humidity has exceeded 80% for 3 minutes.
      
      Monitor for potential moisture issues.
